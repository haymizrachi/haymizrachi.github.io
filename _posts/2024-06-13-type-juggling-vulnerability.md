---
layout:     post
title:      Type Juggling and Dangers of Loose Comparisons
date: 2024-06-12 12:00
summary:    Exploring how type juggling leverages loose comparisons to breach web application security.
categories: security
---

Welcome back, It's Hay here with another important topic.
<br /><br />
Today, I want to discuss about a vulnerability that is rarely talked and often stays under the hood, yet represents a significant security issue once it's found - 'Type Juggling' Vulnerability:

<p align="center">
  <img src="{{ site.url }}/images/type_juggling_wtf.jpg" alt="type_juggling_wtf" />
</p>

For a web application to function correctly, it needs to perform various comparison and calculation checks on the backend. These include authorizing users based on their relevant privileges, managing a password reset mechanism for users who have forgotten their passwords, validating sessions to authenticate users, and more.

All the examples mentioned above require the use of comparison statements to achieve their functionality properly. Attackers who understand this potential may attempt to bypass these mechanisms and leading to unexpected results.

### TL;DR

Programming languages like `PHP` support 'loose comparison' operators (==, !=) that interpret equality differently in `if` statements. This can lead to security bypass issues, present risks to the entire application.

Make sure to check and compare both the value and their type to ensure the comparison is based on strict (===, !==) comparison.

### What 'Loose Comparison' is all about?
In languages like PHP, JavaScript, and Ruby, comparison operations are based on the values of variables rather than their types, which is known as 'loose' comparison.
<br /><br />
This approach can lead to issues in certain cases, unlike 'strict' comparison where both value and type must be matched.

### Comparision Table - Overview:
To illustrate the differences between loose and strict comparison types, `PHP.net` [^2] presents various use cases scenarios that highlight the importance of using the correct comparison operator to get the right outcomes:

<p align="center">
  <img src="{{ site.url }}/images/loose_compare_table.png" alt="php_loose_comparison_table" />
</p>
<p align="center">Loose comparisons table</p>

Versus

<p align="center">
  <img src="{{ site.url }}/images/strict_compare_table.png" alt="php_strict_comparison_table" />
</p>
<p align="center">Strict comparisons table</p>

Some Unexpected examples which yields True in loose comparison, whereas it yields False in strict comparison:
  * `"php" == 0`
  * `"10 foxes on the tree" == 10`
  * `0e13466324543662017 == 0e5932847`


### Conclusion

XXXX

<br />
Thanks for reading!

<br />
__Disclaimer:__ This material is for informational purposes only, and should not be construed as legal advice or opinion. For actual legal advice, you should consult with professional legal services.

---

[^1]: [PHP Official Type Juggling Documentation](https://www.php.net/manual/en/language.types.type-juggling.php)
[^2]: [PHP Type Comparison Table](https://www.php.net/manual/en/types.comparisons.php)